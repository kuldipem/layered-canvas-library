<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<title>Canvaseroids - HTML 5 Canvas Asteroids Clone</title>
		<script type="text/javascript" src="../../Canvas.js"></script>
		<script type="text/javascript">
			
			// Globals //
			
			var imagesToLoad = new Array();
				imagesToLoad.push("title.png");
			
			function preloadImages() {
				if(imagesToLoad.length > 0) {
					for(i in imagesToLoad) {
						var img = new Image();
							img.src = imagesToLoad[i];
					}
				}
			}
			
			function showTitleScreen() {
				var title = new Image();

				// background layer
				// menu layer
				
				var background = new Canvas.Layer({
					id: "backgroundLayer",
					x : 0,
					y : 0,
					height: 500,
					width: 500,
					items: [{
						id: "mainBg",
						x: 0,
						y: 0,
						draw : function (ctx) {
							if(typeof(ctx) == "undefined")
								ctx = Canvas.getCtx();
							
							ctx.fillStyle = "black";
							ctx.fillRect(this.x, this.y, this.width, this.height);							
						}
					},{
						id: "randStars",
						x: 0,
						y: 0,
						height: 500,
						width: 500,
						// Generate a star field
						draw : function (ctx) {
							var noOfStars = 100;
							
							ctx.fillStyle = "rgb(210, 210, 210)";
							
							// Just incase we need to redraw the background, this will keep the current random 
							// star field 
							if (typeof(this.stars) == "undefined") {
								this.stars = new Array();
								for (i = 0; i < noOfStars; i++) {
									var x = Math.floor(Math.random() * 500);
									var y = Math.floor(Math.random() * 500);
									this.stars.push({x: x, y: y});
									
									ctx.fillRect(x, y, 1, 1);
								}
							} else {
								for(i in this.stars) {
									ctx.fillRect(this.stars[i].x, this.stars[i].y, 1, 1);
								}
							}
						}
					},{
						id: "grid",
						x:0,
						y:0,
						draw : function (ctx) {
							ctx.lineWidth = 1;
							ctx.strokeStyle = '#FFFFFF';
							ctx.moveTo(250, 0);
							ctx.lineTo(250, 500);
							
							ctx.moveTo(0, 250);
							ctx.lineTo(500, 250);
							ctx.stroke(); 
						}
					}]
				});
				
				var menu = new Canvas.Layer({
					x : 0,
					y : 0,
					height: 500,
					width: 500,
					items : [{
						id: "titleImage",
						x : 2,
						y : 8,
						draw : function (ctx) {
							// Ctx is passed from the parent layer
							ctx.drawImage(title, this.x, this.y);
						}
					},{
						id: "startButton",
						x : 201,
						y : 242,
						width : 99,
						height: 18,
						fillStyle: "rgb(0,255,0)",
						draw : function (ctx) {
							ctx.font = "18px Monospace";
							ctx.fillStyle = this.fillStyle;
							ctx.textBaseline = 'top';
							ctx.fillText("[ START ]", this.x, this.y);
						},
						on : {
							"mouseover" : function (event, type, ctx) {
								// Change the fill style, and redraw the menu item
								this.fillStyle = "rgb(255, 255, 255)";
								this.draw(ctx);
							},
							"mouseout" : function (event, type, ctx) {								
								// Redraw the menu item
								this.fillStyle = "rgb(0, 255, 0)";
								this.draw(ctx);								
							}
						}
					}]
				});
				
				var highScore = new Canvas.Layer({
					x: 0,
					y: 0,
					width: 500,
					height: 500,
					items: [{
						id: "scoreContainer",
						// Draws a box to contain the high score list
						draw : function (ctx) {
							ctx.strokeStyle = "rgb(0,255,0)";
							ctx.strokeRect(100, 300, 300, 150);
							
							ctx.font = "12px Monospace";
							ctx.fillStyle = "rgb(0,255,)";
							ctx.fillText("::High Score List:.", 101, 303);
						}
					}]
				});
	
				title.onload = function () {
					Canvas.LayerManager.draw();
				}
				title.src = "title.png";

				
			}
			
			function init(){
				Canvas.setEl("canvas");
				preloadImages();
				showTitleScreen();
			}
		</script>
		<style type="text/css">
			body {
				padding: 0px;
				margin: 0px;
				background-color: #000;
			}
			canvas {
				border: 1px solid #00CC00;
			}
		</style>
	</head>
	<body onLoad="init()">
		<center>
			<canvas id="canvas" width="500" height="500"></canvas>
		</center>
	</body>
</html>
